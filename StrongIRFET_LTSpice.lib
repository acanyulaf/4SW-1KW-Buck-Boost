* INFINEON Power Transistors                                    *
* LTSPICE Library                                               *
*                                                               *
*                                                               *
* Version 091222                                                *
*                                                               *
*****************************************************************
*                                                               *
* The Simulation Model is subject to change without notice. In  *
* addition, models can be a useful tool in evaluating device    *
* performance, they cannot reflect the accurate device          *
* performance under all conditions, nor are they intended to    *
* replace bread boarding for final verification. Infineon       *
* therefore does not assume any warranty or liability           *
* whatsoever arising from their use. Infineon does not assume   *
* any warranty or liability for the values and functions of the *
* Simulation Model.                                             *
* The methods and results of the Simulation Model are to the    *
* best of our knowledge                                         *
* correct. However, the user is fully responsible to verify and *
* validate these results under the operating conditions and in  *
* the environment of its application. Infineon will not bear    *
* the responsibility arising out of or in connection with any   *
* malfunction of the Simulation Models.                         *
* Models provided by Infineon are not warranted by Infineon as  *
* completely and comprehensively representing all the           *
* specifications and operating characteristics of the           *
* semiconductor products to which these models relate. The      *
* models describe the characteristics of typical devices. In    *
* all cases, the current data sheet information for a given     *
* device is the conclusive design guideline and the only actual *
* performance specification.                                    *
*                                                               *
*                                                               *
* This library contains electrical models of the following      *
* Infineon transistors:                                         *
*                                                               *
*   IPC331N15NM5R       IPTC039N15NM5       IPTC044N15NM5       *
*   IPTC054N15NM5       IPTC063N15NM5       IPTG039N15NM5       *
*   IPTG044N15NM5       IPTG054N15NM5       IPTG063N15NM5       *
*   IRF150P220          IRF150P221                              *
*                                                               *
*****************************************************************
* thermal nodes of level 3 models:                              *
*                                                               *
*  .SUBCKT IPC331N15NM5R drain gate source Tj Tcase             *
*  Tj :    potential=temperature (in °C) at junction (typically *
*          not connected)                                       *
*  Tcase : node where the boundary condition - external heat    *
*          sinks etc - have to be connected (ideal heat sink    *
*          can be modeled by using a voltage source stating the *
*          ambient temperature in °C between Tcase and ground.  *
*                                                               *
*****************************************************************

.options Thev_Induc=1

.SUBCKT S5_150_f_var dd g s0 sp Tj PARAMS: a=1 Rsp=1 dVth=0 dR=0 dgfs=0 Inn=1
+Unn=1 Rmax=1 gmin=1 Rs=1 Rp=1 dC=0 Rm=1u

.PARAM b0=15.26       p0=9.73        p1=-31.4m      p2=50u         bs1=0          bs2=0
.PARAM mubet=987m     fbet=0         Vth0=4.83      c=1.4          Fm=200m        Fn=500m
.PARAM al=500m        auth=3.5m      dvx=550m       dvgs=-200m     auth_sub=3.5m

.PARAM Rd=64.6m       rpara=500u     nmu=3.5        Rf=520m

.PARAM lnIsj=-25.46   ndi=1.14       Rdi=13.96m     nmu2=0         n_Isj=1        UB=161
.PARAM ab=65m         ab2=0          UT=100m        lB=-23         ta=30n

.PARAM kbq=85.8u      Tref=298       T0=273

.PARAM f3=176p        f3a=51p

.PARAM ps1=8.32p      ps2=-774m      ps3=19.3p      ps4=-47.4m     ps5=0.636p     ps6=2.5p
.PARAM ps7=0          pc0=15p

.PARAM qs7=93.3p      qs8=-19.1m

.PARAM q80=53.1p      q81=49.7p      q82=0.61p      q85=0          qs1=25.6p      qs4=67p
.PARAM qs5=-413m

.PARAM x1={(q80-q81)/q82}       x2={q80/q82}
.PARAM Vmin=4.03      Vmax=5.63      dCmax=330m
.PARAM Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM q0={b0*((1-fbet)*(T0/Tref)**mubet+fbet)*a}
.PARAM q1={(Unn-Inn*Rs-Vth0)*q0}
.PARAM q2={(Fm*SQRT(0.4)-c)*Inn*q0}
.PARAM Rlim={((q1+2*q2*Rmax-SQRT(q1**2+4*q2))/(2*q2))/(1+rpara*(Inn/a)**2)}
.PARAM dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a-Rs-Rp,0),0)}
.PARAM bm={c/((1/gmin-Rs)**2*Inn*a*((1-fbet)*(T0/Tref)**mubet+fbet))}
.PARAM bet={b0+(b0-bm)*if(dR==0,if(dVth==0,limit(dgfs,-1,0),0),0)}
.PARAM dC1={1+dCmax*limit(dC,0,1)}
.PARAM dC2={1+dCmax*limit(dC,0,1)}

.PARAM Cgs0={f3*a*dC1}
.PARAM Cgs1={f3a*a*dC1}

.PARAM Cds2={qs7*a*dC1}
.PARAM Cds5={qs1*a*dC1}
.PARAM Cds7={qs4*a*dC1}
.PARAM Cds8={q80*a*dC1}

.PARAM Cdg1={(ps1*a+pc0*sqrt(a))*dC2}
.PARAM Cdg2={ps3*a*dC2}
.PARAM Cdg3={(ps5*a+ps6)*dC2}
.PARAM dRdi={Rdi/a}

.FUNC Ue(g,y,w)  {(g-Vth+auth*(w-Tref)+Fm*y**Fn)}
.FUNC Ue1(g,y,w) {Ue(g,y,w)+(1+limit(Ue(g,y,w)+dvx,0,1)**2*(2*limit(Ue(g,y,w)+dvx,0,1)-3))*(dvgs+(auth_sub-auth)*(w-Tref))}

.FUNC Ia(Uee,p,pp,z1) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp)/p))}
.FUNC Ih(Uds,T,p,Uee) {bet*((1-fbet)*(T0/T)**mubet+fbet)*Ia(Uee,p,min(2*p,p+c*Uds),min(Uds,Uee/(2*c)))}
.FUNC Jh(d,g,w,y,s,x) {a*((Ih(s*y+min(d,0),w,(p0+(p1+p2*w)*w)*kbq*w,Ue1(g,y,w))+exp(min(lB+(d-UB-ab*(w-Tref))/UT,24))))}

.FUNC Idiode(Usd,Tj,Iss) {exp(min(ln(Iss)+Usd/(ndi*kbq*Tj),7))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),7))*(Tj/Tref)**n_Isj)}

.FUNC Pr(Vss0,Vssp)  {Vss0*Vss0/Rm+Vssp*Vssp/Rsp}
.FUNC Q01(Uds) {a*(limit(Uds,x1,x2)*(q80-q82/2*limit(Uds,x1,x2))+min(Uds-x1,0)*q81-max(x1,0)*(q80-q81)/2)}

C_Cgs  g      s      {Cgs0}
C_Cgs1 g      sp     {Cgs1}

E_Eds2 d      edep2  VALUE {if(qs8==0,0,V(d,s)-(exp(qs8*max(V(d,s),-1))-1)/min(qs8,-1u)-min(V(d,s)+1,0)*exp(-qs8))}
C_Cds2 edep2  s      {Cds2}

C_Cds5 d      sp     {Cds5}
E_Eds7 d      edep7  VALUE {if(qs5==0,0,V(d,sp)-(exp(qs5*max(V(d,sp),0))-1)/min(qs5,-1u)-min(V(d,sp),0))}
C_Cds7 edep7  sp     {Cds7}
E_Eds8 d      edep8  VALUE {V(d,sp)-Q01(V(d,sp))/Cds8}
C_Cds8 edep8  sp     {Cds8}

E_Edg1 d    ox1 VALUE {if(ps2==0,0,V(d,g)-(exp(ps2*max(V(d,g),0))-1)/min(ps2,-1u)-min(V(d,g),0))}
C_Cdg1 ox1  g   {Cdg1}
E_Edg2 d    ox2 VALUE =
+{if(ps4==0,0,V(d,g)-((exp(ps4*(max(V(d,g)+ps7,0)))-exp(ps4*max(ps7,0)))/min(ps4,-1u)+min(V(d,g)+max(ps7,0),max(0,-ps7))))}
C_Cdg2 ox2  g   {Cdg2}
C_Cdg3 d    g   {Cdg3}

Rfp     s sp    {Rsp}

G_chan   d5a   s  VALUE={Jh(V(d5a,s),V(g,s),T0+limit(V(Tj),-200,300),(SQRT(1+4*al*max(V(d5a,s),0))-1)/2/al,sgn(V(d5a,s)),0)}
Rd06     d5a  d5  1u
V_sm     d    d5  0
G_RMos   d1    d  VALUE={V(d1,d)/(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)/(1+rpara*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_Rdio   d2   d1  VALUE={V(d2,d1)/(dRdi*((limit(V(Tj),-200,999)+T0)/Tref)**nmu2)}
V_sense2 d2   d3  0

Dbody s d3 dbody
.model dbody D (BV= {UB*10},CJO ={Cds2/1000},TT ={ta},IS ={a*exp(lnIsj)} m={0.3} RS={dRdi*1m} n={ndi})


R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  1k
Rd07     d3    s  1G
Rssp      g   sp  100Meg

Rmet      s    s0 {Rm}


G_TH      0   Tj  VALUE =
+{(I(V_sense)-I(V_sense2))*V(d1,d)+I(V_sm)*V(d,s)+I(V_sense2)*V(d1,s)+Pr(V(s,s0),V(s,sp))}


.ENDS

**********

.SUBCKT IPC331N15NM5R_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Ls=10p Ld=10p Lg=10p

.PARAM Rs=150u      Rg=14        Rd=50u       Rm=148u
.PARAM Inn=2        Unn=10       Rmax=2.9m    gmin=11
.PARAM act=29.03    Rsp=0.15    

X1  d1 g s sp Tj1 S5_150_f_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
+Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}

Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}

E1    Tj     w    VALUE={TEMP}
Vp    Tj1    Tj   0
R1    Tj     Tj1  1u
G_power 0    Tj   VALUE={V(s1,s)*V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)+V(g,g1)*V(g,g1)/Rg+V(d1,d2)*V(d1,d2)/Rd+I(Vp)}
R2      w    0    1u

.ENDS

**********

.SUBCKT IPTC039N15NM5_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Ls=1.5n Ld=2.5n Lg=3n

.PARAM Rs=220u      Rg=0.9       Rd=30u       Rm=64u
.PARAM Inn=50       Unn=10       Rmax=3.9m    gmin=54
.PARAM act=24.337   Rsp=0.15    

X1  d1 g s sp Tj1 S5_150_f_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
+Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}

Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}

E1    Tj     w    VALUE={TEMP}
Vp    Tj1    Tj   0
R1    Tj     Tj1  1u
G_power 0    Tj   VALUE={V(s1,s)*V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)+V(g,g1)*V(g,g1)/Rg+V(d1,d2)*V(d1,d2)/Rd+I(Vp)}
R2      w    0    1u

.ENDS

**********

.SUBCKT IPTC044N15NM5_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Ls=2n Ld=2.5n Lg=3n

.PARAM Rs=272u      Rg=0.9       Rd=30u       Rm=82u
.PARAM Inn=50       Unn=10       Rmax=4.4m    gmin=53
.PARAM act=23.52    Rsp=0.15    

X1  d1 g s sp Tj1 S5_150_f_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
+Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}

Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}

E1    Tj     w    VALUE={TEMP}
Vp    Tj1    Tj   0
R1    Tj     Tj1  1u
G_power 0    Tj   VALUE={V(s1,s)*V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)+V(g,g1)*V(g,g1)/Rg+V(d1,d2)*V(d1,d2)/Rd+I(Vp)}
R2      w    0    1u

.ENDS

**********

.SUBCKT IPTC054N15NM5_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Ls=2n Ld=2.5n Lg=3n

.PARAM Rs=270u      Rg=0.9       Rd=30u       Rm=80u
.PARAM Inn=50       Unn=10       Rmax=5.4m    gmin=48
.PARAM act=19.08    Rsp=0.15    

X1  d1 g s sp Tj1 S5_150_f_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
+Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}

Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}

E1    Tj     w    VALUE={TEMP}
Vp    Tj1    Tj   0
R1    Tj     Tj1  1u
G_power 0    Tj   VALUE={V(s1,s)*V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)+V(g,g1)*V(g,g1)/Rg+V(d1,d2)*V(d1,d2)/Rd+I(Vp)}
R2      w    0    1u

.ENDS

**********

.SUBCKT IPTC063N15NM5_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Ls=2n Ld=2.5n Lg=3n

.PARAM Rs=255u      Rg=0.9       Rd=30u       Rm=65u
.PARAM Inn=50       Unn=10       Rmax=6.3m    gmin=44
.PARAM act=16.3     Rsp=0.15    

X1  d1 g s sp Tj1 S5_150_f_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
+Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}

Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}

E1    Tj     w    VALUE={TEMP}
Vp    Tj1    Tj   0
R1    Tj     Tj1  1u
G_power 0    Tj   VALUE={V(s1,s)*V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)+V(g,g1)*V(g,g1)/Rg+V(d1,d2)*V(d1,d2)/Rd+I(Vp)}
R2      w    0    1u

.ENDS

**********

.SUBCKT IPTG039N15NM5_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Ls=1.5n Ld=2n Lg=3n

.PARAM Rs=220u      Rg=0.9       Rd=20u       Rm=64u
.PARAM Inn=50       Unn=10       Rmax=3.9m    gmin=54
.PARAM act=24.34    Rsp=0.15    

X1  d1 g s sp Tj1 S5_150_f_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
+Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}

Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}

E1    Tj     w    VALUE={TEMP}
Vp    Tj1    Tj   0
R1    Tj     Tj1  1u
G_power 0    Tj   VALUE={V(s1,s)*V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)+V(g,g1)*V(g,g1)/Rg+V(d1,d2)*V(d1,d2)/Rd+I(Vp)}
R2      w    0    1u

.ENDS

**********

.SUBCKT IPTG044N15NM5_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Ls=2n Ld=2n Lg=3n

.PARAM Rs=272u      Rg=0.9       Rd=20u       Rm=82u
.PARAM Inn=50       Unn=10       Rmax=4.4m    gmin=53
.PARAM act=23.52    Rsp=0.15    

X1  d1 g s sp Tj1 S5_150_f_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
+Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}

Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}

E1    Tj     w    VALUE={TEMP}
Vp    Tj1    Tj   0
R1    Tj     Tj1  1u
G_power 0    Tj   VALUE={V(s1,s)*V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)+V(g,g1)*V(g,g1)/Rg+V(d1,d2)*V(d1,d2)/Rd+I(Vp)}
R2      w    0    1u

.ENDS

**********

.SUBCKT IPTG054N15NM5_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Ls=2n Ld=2n Lg=3n

.PARAM Rs=270u      Rg=0.9       Rd=20u       Rm=80u
.PARAM Inn=50       Unn=10       Rmax=5.4m    gmin=48
.PARAM act=19.08    Rsp=0.15    

X1  d1 g s sp Tj1 S5_150_f_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
+Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}

Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}

E1    Tj     w    VALUE={TEMP}
Vp    Tj1    Tj   0
R1    Tj     Tj1  1u
G_power 0    Tj   VALUE={V(s1,s)*V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)+V(g,g1)*V(g,g1)/Rg+V(d1,d2)*V(d1,d2)/Rd+I(Vp)}
R2      w    0    1u

.ENDS

**********

.SUBCKT IPTG063N15NM5_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Ls=2n Ld=2n Lg=3n

.PARAM Rs=255u      Rg=0.9       Rd=20u       Rm=65u
.PARAM Inn=50       Unn=10       Rmax=6.3m    gmin=44
.PARAM act=16.3     Rsp=0.15    

X1  d1 g s sp Tj1 S5_150_f_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
+Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}

Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}

E1    Tj     w    VALUE={TEMP}
Vp    Tj1    Tj   0
R1    Tj     Tj1  1u
G_power 0    Tj   VALUE={V(s1,s)*V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)+V(g,g1)*V(g,g1)/Rg+V(d1,d2)*V(d1,d2)/Rd+I(Vp)}
R2      w    0    1u

.ENDS

**********

.SUBCKT IRF150P220_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Ls=6n Ld=4n Lg=5n

.PARAM Rs=736u      Rg=0.5       Rd=91u       Rm=434u
.PARAM Inn=100      Unn=10       Rmax=2.7m    gmin=100
.PARAM act=53       Rsp=1u      

X1  d1 g s sp Tj1 S5_150_f_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
+Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}

Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}

E1    Tj     w    VALUE={TEMP}
Vp    Tj1    Tj   0
R1    Tj     Tj1  1u
G_power 0    Tj   VALUE={V(s1,s)*V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)+V(g,g1)*V(g,g1)/Rg+V(d1,d2)*V(d1,d2)/Rd+I(Vp)}
R2      w    0    1u

.ENDS

**********

.SUBCKT IRF150P221_L1 drain gate source PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Ls=6n Ld=4n Lg=5n

.PARAM Rs=539u      Rg=1.1       Rd=91u       Rm=237u
.PARAM Inn=100      Unn=10       Rmax=4.5m    gmin=75
.PARAM act=26.44    Rsp=1u      

X1  d1 g s sp Tj1 S5_150_f_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
+Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}

Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}

E1    Tj     w    VALUE={TEMP}
Vp    Tj1    Tj   0
R1    Tj     Tj1  1u
G_power 0    Tj   VALUE={V(s1,s)*V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)+V(g,g1)*V(g,g1)/Rg+V(d1,d2)*V(d1,d2)/Rd+I(Vp)}
R2      w    0    1u

.ENDS

**********

.SUBCKT IPC331N15NM5R drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=10p Ld=10p Lg=10p

.PARAM Rs=150u      Rg=14        Rd=50u       Rm=148u

.PARAM Inn=2        Unn=10       Rmax=2.9m    gmin=11
.PARAM RRf=350m     Rrbond=0.012 Rtb=5.3      g2=729m
.PARAM act=29.03    Rsp=0.15    

.FUNC Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S5_150_f_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               8.05m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {1.24m+limit(Zthtype,0,1)*462.28u}
Rth2  t1      t2              {12.44m+limit(Zthtype,0,1)*4.6m}
Rth3  t2      t3              {52.13m+limit(Zthtype,0,1)*22.92m}
Rth4  t3      t4              {63.55m+limit(Zthtype,0,1)*20.47m}
Rth5  t4      Tcase           {168.05m+limit(Zthtype,0,1)*54.14m}
Cth1  Tj      0               505.2u
Cth2  t1      0               812.38u
Cth3  t2      0               7m
Cth4  t3      0               4.93m
Cth5  t4      0               144.26m
Cth6  Tcase   0               190m

.ENDS

**********

.SUBCKT IPTC039N15NM5 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=1.5n Ld=2.5n Lg=3n

.PARAM Rs=220u      Rg=0.9       Rd=30u       Rm=64u

.PARAM Inn=50       Unn=10       Rmax=3.9m    gmin=54
.PARAM RRf=500m     Rrbond=0.003 Rtb=2.6      g2=999m
.PARAM act=24.337   Rsp=0.15    

.FUNC Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S5_150_f_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               10.974m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {1.48m+limit(Zthtype,0,1)*550.54u}
Rth2  t1      t2              {14.79m+limit(Zthtype,0,1)*5.48m}
Rth3  t2      t3              {53.74m+limit(Zthtype,0,1)*7.54m}
Rth4  t3      t4              {58.73m+limit(Zthtype,0,1)*56.22m}
Rth5  t4      Tcase           {138.69m+limit(Zthtype,0,1)*132.77m}
Cth1  Tj      0               423.53u
Cth2  t1      0               682.95u
Cth3  t2      0               5.56m
Cth4  t3      0               4.29m
Cth5  t4      0               80m
Cth6  Tcase   0               30m

.ENDS

**********

.SUBCKT IPTC044N15NM5 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=2n Ld=2.5n Lg=3n

.PARAM Rs=272u      Rg=0.9       Rd=30u       Rm=82u

.PARAM Inn=50       Unn=10       Rmax=4.4m    gmin=53
.PARAM RRf=500m     Rrbond=0.004 Rtb=3.3      g2=999m
.PARAM act=23.52    Rsp=0.15    

.FUNC Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S5_150_f_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               8.779m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {1.53m+limit(Zthtype,0,1)*571.07u}
Rth2  t1      t2              {15.3m+limit(Zthtype,0,1)*5.66m}
Rth3  t2      t3              {55.54m+limit(Zthtype,0,1)*7.81m}
Rth4  t3      t4              {60.77m+limit(Zthtype,0,1)*62.86m}
Rth5  t4      Tcase           {142.53m+limit(Zthtype,0,1)*147.43m}
Cth1  Tj      0               409.31u
Cth2  t1      0               660.39u
Cth3  t2      0               5.38m
Cth4  t3      0               4.14m
Cth5  t4      0               80m
Cth6  Tcase   0               30m

.ENDS

**********

.SUBCKT IPTC054N15NM5 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=2n Ld=2.5n Lg=3n

.PARAM Rs=270u      Rg=0.9       Rd=30u       Rm=80u

.PARAM Inn=50       Unn=10       Rmax=5.4m    gmin=48
.PARAM RRf=500m     Rrbond=0.004 Rtb=3.3      g2=999m
.PARAM act=19.08    Rsp=0.15    

.FUNC Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S5_150_f_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               8.779m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {1.89m+limit(Zthtype,0,1)*700u}
Rth2  t1      t2              {18.79m+limit(Zthtype,0,1)*6.95m}
Rth3  t2      t3              {67.95m+limit(Zthtype,0,1)*9.65m}
Rth4  t3      t4              {74.91m+limit(Zthtype,0,1)*78.01m}
Rth5  t4      Tcase           {167.12m+limit(Zthtype,0,1)*174.03m}
Cth1  Tj      0               332.04u
Cth2  t1      0               537.71u
Cth3  t2      0               4.4m
Cth4  t3      0               3.36m
Cth5  t4      0               80m
Cth6  Tcase   0               30m

.ENDS

**********

.SUBCKT IPTC063N15NM5 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=2n Ld=2.5n Lg=3n

.PARAM Rs=255u      Rg=0.9       Rd=30u       Rm=65u

.PARAM Inn=50       Unn=10       Rmax=6.3m    gmin=44
.PARAM RRf=500m     Rrbond=0.004 Rtb=3.3      g2=999m
.PARAM act=16.3     Rsp=0.15    

.FUNC Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S5_150_f_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               8.779m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {2.21m+limit(Zthtype,0,1)*821.73u}
Rth2  t1      t2              {21.93m+limit(Zthtype,0,1)*8.11m}
Rth3  t2      t3              {79.04m+limit(Zthtype,0,1)*11.32m}
Rth4  t3      t4              {87.69m+limit(Zthtype,0,1)*96.51m}
Rth5  t4      Tcase           {186.79m+limit(Zthtype,0,1)*205.57m}
Cth1  Tj      0               283.67u
Cth2  t1      0               460.76u
Cth3  t2      0               3.78m
Cth4  t3      0               2.87m
Cth5  t4      0               64.86m
Cth6  Tcase   0               30m

.ENDS

**********

.SUBCKT IPTG039N15NM5 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=1.5n Ld=2n Lg=3n

.PARAM Rs=220u      Rg=0.9       Rd=20u       Rm=64u

.PARAM Inn=50       Unn=10       Rmax=3.9m    gmin=54
.PARAM RRf=500m     Rrbond=0.003 Rtb=2.6      g2=999m
.PARAM act=24.34    Rsp=0.15    

.FUNC Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S5_150_f_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               10.974m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {1.48m+limit(Zthtype,0,1)*550.29u}
Rth2  t1      t2              {14.79m+limit(Zthtype,0,1)*5.48m}
Rth3  t2      t3              {53.73m+limit(Zthtype,0,1)*7.54m}
Rth4  t3      t4              {58.72m+limit(Zthtype,0,1)*56.24m}
Rth5  t4      Tcase           {138.67m+limit(Zthtype,0,1)*132.8m}
Cth1  Tj      0               423.58u
Cth2  t1      0               683.03u
Cth3  t2      0               5.56m
Cth4  t3      0               4.29m
Cth5  t4      0               80m
Cth6  Tcase   0               30m

.ENDS

**********

.SUBCKT IPTG044N15NM5 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=2n Ld=2n Lg=3n

.PARAM Rs=272u      Rg=0.9       Rd=20u       Rm=82u

.PARAM Inn=50       Unn=10       Rmax=4.4m    gmin=53
.PARAM RRf=500m     Rrbond=0.004 Rtb=3.3      g2=999m
.PARAM act=23.52    Rsp=0.15    

.FUNC Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S5_150_f_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               8.779m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {1.53m+limit(Zthtype,0,1)*571.07u}
Rth2  t1      t2              {15.3m+limit(Zthtype,0,1)*5.66m}
Rth3  t2      t3              {55.54m+limit(Zthtype,0,1)*7.81m}
Rth4  t3      t4              {60.77m+limit(Zthtype,0,1)*62.86m}
Rth5  t4      Tcase           {142.53m+limit(Zthtype,0,1)*147.43m}
Cth1  Tj      0               409.31u
Cth2  t1      0               660.39u
Cth3  t2      0               5.38m
Cth4  t3      0               4.14m
Cth5  t4      0               80m
Cth6  Tcase   0               30m

.ENDS

**********

.SUBCKT IPTG054N15NM5 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=2n Ld=2n Lg=3n

.PARAM Rs=270u      Rg=0.9       Rd=20u       Rm=80u

.PARAM Inn=50       Unn=10       Rmax=5.4m    gmin=48
.PARAM RRf=500m     Rrbond=0.004 Rtb=3.3      g2=999m
.PARAM act=19.08    Rsp=0.15    

.FUNC Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S5_150_f_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               8.779m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {1.89m+limit(Zthtype,0,1)*700u}
Rth2  t1      t2              {18.79m+limit(Zthtype,0,1)*6.95m}
Rth3  t2      t3              {67.95m+limit(Zthtype,0,1)*9.65m}
Rth4  t3      t4              {74.91m+limit(Zthtype,0,1)*78.01m}
Rth5  t4      Tcase           {167.12m+limit(Zthtype,0,1)*174.03m}
Cth1  Tj      0               332.04u
Cth2  t1      0               537.71u
Cth3  t2      0               4.4m
Cth4  t3      0               3.36m
Cth5  t4      0               80m
Cth6  Tcase   0               30m

.ENDS

**********

.SUBCKT IPTG063N15NM5 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=2n Ld=2n Lg=3n

.PARAM Rs=255u      Rg=0.9       Rd=20u       Rm=65u

.PARAM Inn=50       Unn=10       Rmax=6.3m    gmin=44
.PARAM RRf=500m     Rrbond=0.004 Rtb=3.3      g2=999m
.PARAM act=16.3     Rsp=0.15    

.FUNC Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S5_150_f_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               8.779m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {2.21m+limit(Zthtype,0,1)*821.73u}
Rth2  t1      t2              {21.93m+limit(Zthtype,0,1)*8.11m}
Rth3  t2      t3              {79.04m+limit(Zthtype,0,1)*11.32m}
Rth4  t3      t4              {87.69m+limit(Zthtype,0,1)*96.51m}
Rth5  t4      Tcase           {186.79m+limit(Zthtype,0,1)*205.57m}
Cth1  Tj      0               283.67u
Cth2  t1      0               460.76u
Cth3  t2      0               3.78m
Cth4  t3      0               2.87m
Cth5  t4      0               64.86m
Cth6  Tcase   0               30m

.ENDS

**********

.SUBCKT IRF150P220 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=6n Ld=4n Lg=5n

.PARAM Rs=736u      Rg=0.5       Rd=91u       Rm=434u

.PARAM Inn=100      Unn=10       Rmax=2.7m    gmin=100
.PARAM RRf=438m     Rrbond=8m    Rtb=4.3      g2=662m
.PARAM act=53       Rsp=1u      

.FUNC Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S5_150_f_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               9.36m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {6.53m+limit(Zthtype,0,1)*2.41m}
Rth2  t1      t2              {52.84m+limit(Zthtype,0,1)*3.81m}
Rth3  t2      t3              {71.78m+limit(Zthtype,0,1)*3.7u}
Rth4  t3      t4              {25.6m+limit(Zthtype,0,1)*45.36m}
Rth5  t4      Tcase           {22.25m+limit(Zthtype,0,1)*39.42m}
Cth1  Tj      0               11.24m
Cth2  t1      0               7.373m
Cth3  t2      0               0.1292
Cth4  t3      0               1.09935
Cth5  t4      0               1.864m
Cth6  Tcase   0               2

.ENDS

**********

.SUBCKT IRF150P221 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=6n Ld=4n Lg=5n

.PARAM Rs=539u      Rg=1.1       Rd=91u       Rm=237u

.PARAM Inn=100      Unn=10       Rmax=4.5m    gmin=75
.PARAM RRf=438m     Rrbond=8m    Rtb=4.3      g2=662m
.PARAM act=26.44    Rsp=1u      

.FUNC Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S5_150_f_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmin={gmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               9.36m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {11.05m+limit(Zthtype,0,1)*4.09m}
Rth2  t1      t2              {50.81m+limit(Zthtype,0,1)*8.4m}
Rth3  t2      t3              {43.67m+limit(Zthtype,0,1)*680n}
Rth4  t3      t4              {143.3m+limit(Zthtype,0,1)*45.67m}
Rth5  t4      Tcase           {100.86m+limit(Zthtype,0,1)*32.15m}
Cth1  Tj      0               2.95m
Cth2  t1      0               3.93m
Cth3  t2      0               543.688u
Cth4  t3      0               25.67m
Cth5  t4      0               243.898m
Cth6  Tcase   0               2

.ENDS

**********

.SUBCKT IPC331N15NM5R_L0 drain gate source

Lg     gate   g1   10p
Ld     drain  d1   10p
Ls     source s1   10p
Rs     s1     s2   150u  TC=3m

Rg     g1     g2   14

M1     d2     g2    s2    s2    DMOS    L=1u   W=1u
.MODEL DMOS NMOS ( KP=362.9  VTO=5  THETA=0  VMAX=1.5e5  ETA=0.005  LEVEL=3)
Rd     d1    d2    2.29m  TC=9m

Dbd     s2    d2    Dbt
.MODEL     Dbt    D(BV=161  M=0.65  CJO=2.7n  VJ=2.5V)
Rsp     s2    s3     0.15
Dbd1    s3    d2     Dbt1
.MODEL     Dbt1    D(BV=1000   M=0.65  CJO=10.54n  VJ=2.5V)
Dbody   s2   21    DBODY
.MODEL DBODY  D(IS=11.6p  N=1.05  RS=0.02u  EG=1.12  TT=30n)
Rdiode  d1  21    0.41m  TC=1m

.MODEL   sw    NMOS(VTO=0  KP=10   LEVEL=1)
Maux      g2   c    a    a   sw
Maux2     b    d    g2    g2   sw
Eaux      c    a    d2    g2   1
Eaux2     d    g2   d2    g2   -1
Cox       b    d2   0.96n
.MODEL     DGD    D(M=0.42  CJO=0.96n  VJ=0.5)
Rpar      b    d2   1Meg
Dgd       a    d2   DGD
Rpar2     d2   a    10Meg
Cgs     g2    s2    6.59n

.ENDS IPC331N15NM5R_L0

*****************

.SUBCKT IPTC039N15NM5_L0 drain gate source

Lg     gate   g1   3n
Ld     drain  d1   2.5n
Ls     source s1   1.5n
Rs     s1     s2   220u  TC=3m

Rg     g1     g2   0.9

M1     d2     g2    s2    s2    DMOS    L=1u   W=1u
.MODEL DMOS NMOS ( KP=304.2  VTO=5  THETA=0  VMAX=1.5e5  ETA=0.005  LEVEL=3)
Rd     d1    d2    2.7m  TC=9m

Dbd     s2    d2    Dbt
.MODEL     Dbt    D(BV=161  M=0.65  CJO=2.26n  VJ=2.5V)
Rsp     s2    s3     0.15
Dbd1    s3    d2     Dbt1
.MODEL     Dbt1    D(BV=1000   M=0.65  CJO=8.86n  VJ=2.5V)
Dbody   s2   21    DBODY
.MODEL DBODY  D(IS=9.7p  N=1.05  RS=0.02u  EG=1.12  TT=30n)
Rdiode  d1  21    0.49m  TC=1m

.MODEL   sw    NMOS(VTO=0  KP=10   LEVEL=1)
Maux      g2   c    a    a   sw
Maux2     b    d    g2    g2   sw
Eaux      c    a    d2    g2   1
Eaux2     d    g2   d2    g2   -1
Cox       b    d2   0.8n
.MODEL     DGD    D(M=0.42  CJO=0.8n  VJ=0.5)
Rpar      b    d2   1Meg
Dgd       a    d2   DGD
Rpar2     d2   a    10Meg
Cgs     g2    s2    5.52n

.ENDS IPTC039N15NM5_L0

*****************

.SUBCKT IPTC044N15NM5_L0 drain gate source

Lg     gate   g1   3n
Ld     drain  d1   2.5n
Ls     source s1   2n
Rs     s1     s2   272u  TC=3m

Rg     g1     g2   0.9

M1     d2     g2    s2    s2    DMOS    L=1u   W=1u
.MODEL DMOS NMOS ( KP=294  VTO=5  THETA=0  VMAX=1.5e5  ETA=0.005  LEVEL=3)
Rd     d1    d2    2.79m  TC=9m

Dbd     s2    d2    Dbt
.MODEL     Dbt    D(BV=161  M=0.65  CJO=2.19n  VJ=2.5V)
Rsp     s2    s3     0.15
Dbd1    s3    d2     Dbt1
.MODEL     Dbt1    D(BV=1000   M=0.65  CJO=8.57n  VJ=2.5V)
Dbody   s2   21    DBODY
.MODEL DBODY  D(IS=9.4p  N=1.05  RS=0.02u  EG=1.12  TT=30n)
Rdiode  d1  21    0.51m  TC=1m

.MODEL   sw    NMOS(VTO=0  KP=10   LEVEL=1)
Maux      g2   c    a    a   sw
Maux2     b    d    g2    g2   sw
Eaux      c    a    d2    g2   1
Eaux2     d    g2   d2    g2   -1
Cox       b    d2   0.78n
.MODEL     DGD    D(M=0.42  CJO=0.78n  VJ=0.5)
Rpar      b    d2   1Meg
Dgd       a    d2   DGD
Rpar2     d2   a    10Meg
Cgs     g2    s2    5.34n

.ENDS IPTC044N15NM5_L0

*****************

.SUBCKT IPTC054N15NM5_L0 drain gate source

Lg     gate   g1   3n
Ld     drain  d1   2.5n
Ls     source s1   2n
Rs     s1     s2   270u  TC=3m

Rg     g1     g2   0.9

M1     d2     g2    s2    s2    DMOS    L=1u   W=1u
.MODEL DMOS NMOS ( KP=238.5  VTO=5  THETA=0  VMAX=1.5e5  ETA=0.005  LEVEL=3)
Rd     d1    d2    3.44m  TC=9m

Dbd     s2    d2    Dbt
.MODEL     Dbt    D(BV=161  M=0.65  CJO=1.77n  VJ=2.5V)
Rsp     s2    s3     0.15
Dbd1    s3    d2     Dbt1
.MODEL     Dbt1    D(BV=1000   M=0.65  CJO=6.98n  VJ=2.5V)
Dbody   s2   21    DBODY
.MODEL DBODY  D(IS=7.6p  N=1.05  RS=0.03u  EG=1.12  TT=30n)
Rdiode  d1  21    0.63m  TC=1m

.MODEL   sw    NMOS(VTO=0  KP=10   LEVEL=1)
Maux      g2   c    a    a   sw
Maux2     b    d    g2    g2   sw
Eaux      c    a    d2    g2   1
Eaux2     d    g2   d2    g2   -1
Cox       b    d2   0.63n
.MODEL     DGD    D(M=0.42  CJO=0.63n  VJ=0.5)
Rpar      b    d2   1Meg
Dgd       a    d2   DGD
Rpar2     d2   a    10Meg
Cgs     g2    s2    4.33n

.ENDS IPTC054N15NM5_L0

*****************

.SUBCKT IPTC063N15NM5_L0 drain gate source

Lg     gate   g1   3n
Ld     drain  d1   2.5n
Ls     source s1   2n
Rs     s1     s2   255u  TC=3m

Rg     g1     g2   0.9

M1     d2     g2    s2    s2    DMOS    L=1u   W=1u
.MODEL DMOS NMOS ( KP=203.8  VTO=5  THETA=0  VMAX=1.5e5  ETA=0.005  LEVEL=3)
Rd     d1    d2    4.02m  TC=9m

Dbd     s2    d2    Dbt
.MODEL     Dbt    D(BV=161  M=0.65  CJO=1.52n  VJ=2.5V)
Rsp     s2    s3     0.15
Dbd1    s3    d2     Dbt1
.MODEL     Dbt1    D(BV=1000   M=0.65  CJO=5.99n  VJ=2.5V)
Dbody   s2   21    DBODY
.MODEL DBODY  D(IS=6.5p  N=1.05  RS=0.03u  EG=1.12  TT=30n)
Rdiode  d1  21    0.74m  TC=1m

.MODEL   sw    NMOS(VTO=0  KP=10   LEVEL=1)
Maux      g2   c    a    a   sw
Maux2     b    d    g2    g2   sw
Eaux      c    a    d2    g2   1
Eaux2     d    g2   d2    g2   -1
Cox       b    d2   0.54n
.MODEL     DGD    D(M=0.42  CJO=0.54n  VJ=0.5)
Rpar      b    d2   1Meg
Dgd       a    d2   DGD
Rpar2     d2   a    10Meg
Cgs     g2    s2    3.7n

.ENDS IPTC063N15NM5_L0

*****************

.SUBCKT IPTG039N15NM5_L0 drain gate source

Lg     gate   g1   3n
Ld     drain  d1   2n
Ls     source s1   1.5n
Rs     s1     s2   220u  TC=3m

Rg     g1     g2   0.9

M1     d2     g2    s2    s2    DMOS    L=1u   W=1u
.MODEL DMOS NMOS ( KP=304.3  VTO=5  THETA=0  VMAX=1.5e5  ETA=0.005  LEVEL=3)
Rd     d1    d2    2.69m  TC=9m

Dbd     s2    d2    Dbt
.MODEL     Dbt    D(BV=161  M=0.65  CJO=2.26n  VJ=2.5V)
Rsp     s2    s3     0.15
Dbd1    s3    d2     Dbt1
.MODEL     Dbt1    D(BV=1000   M=0.65  CJO=8.86n  VJ=2.5V)
Dbody   s2   21    DBODY
.MODEL DBODY  D(IS=9.7p  N=1.05  RS=0.02u  EG=1.12  TT=30n)
Rdiode  d1  21    0.49m  TC=1m

.MODEL   sw    NMOS(VTO=0  KP=10   LEVEL=1)
Maux      g2   c    a    a   sw
Maux2     b    d    g2    g2   sw
Eaux      c    a    d2    g2   1
Eaux2     d    g2   d2    g2   -1
Cox       b    d2   0.8n
.MODEL     DGD    D(M=0.42  CJO=0.8n  VJ=0.5)
Rpar      b    d2   1Meg
Dgd       a    d2   DGD
Rpar2     d2   a    10Meg
Cgs     g2    s2    5.53n

.ENDS IPTG039N15NM5_L0

*****************

.SUBCKT IPTG044N15NM5_L0 drain gate source

Lg     gate   g1   3n
Ld     drain  d1   2n
Ls     source s1   2n
Rs     s1     s2   272u  TC=3m

Rg     g1     g2   0.9

M1     d2     g2    s2    s2    DMOS    L=1u   W=1u
.MODEL DMOS NMOS ( KP=294  VTO=5  THETA=0  VMAX=1.5e5  ETA=0.005  LEVEL=3)
Rd     d1    d2    2.78m  TC=9m

Dbd     s2    d2    Dbt
.MODEL     Dbt    D(BV=161  M=0.65  CJO=2.19n  VJ=2.5V)
Rsp     s2    s3     0.15
Dbd1    s3    d2     Dbt1
.MODEL     Dbt1    D(BV=1000   M=0.65  CJO=8.57n  VJ=2.5V)
Dbody   s2   21    DBODY
.MODEL DBODY  D(IS=9.4p  N=1.05  RS=0.02u  EG=1.12  TT=30n)
Rdiode  d1  21    0.51m  TC=1m

.MODEL   sw    NMOS(VTO=0  KP=10   LEVEL=1)
Maux      g2   c    a    a   sw
Maux2     b    d    g2    g2   sw
Eaux      c    a    d2    g2   1
Eaux2     d    g2   d2    g2   -1
Cox       b    d2   0.78n
.MODEL     DGD    D(M=0.42  CJO=0.78n  VJ=0.5)
Rpar      b    d2   1Meg
Dgd       a    d2   DGD
Rpar2     d2   a    10Meg
Cgs     g2    s2    5.34n

.ENDS IPTG044N15NM5_L0

*****************

.SUBCKT IPTG054N15NM5_L0 drain gate source

Lg     gate   g1   3n
Ld     drain  d1   2n
Ls     source s1   2n
Rs     s1     s2   270u  TC=3m

Rg     g1     g2   0.9

M1     d2     g2    s2    s2    DMOS    L=1u   W=1u
.MODEL DMOS NMOS ( KP=238.5  VTO=5  THETA=0  VMAX=1.5e5  ETA=0.005  LEVEL=3)
Rd     d1    d2    3.43m  TC=9m

Dbd     s2    d2    Dbt
.MODEL     Dbt    D(BV=161  M=0.65  CJO=1.77n  VJ=2.5V)
Rsp     s2    s3     0.15
Dbd1    s3    d2     Dbt1
.MODEL     Dbt1    D(BV=1000   M=0.65  CJO=6.98n  VJ=2.5V)
Dbody   s2   21    DBODY
.MODEL DBODY  D(IS=7.6p  N=1.05  RS=0.03u  EG=1.12  TT=30n)
Rdiode  d1  21    0.63m  TC=1m

.MODEL   sw    NMOS(VTO=0  KP=10   LEVEL=1)
Maux      g2   c    a    a   sw
Maux2     b    d    g2    g2   sw
Eaux      c    a    d2    g2   1
Eaux2     d    g2   d2    g2   -1
Cox       b    d2   0.63n
.MODEL     DGD    D(M=0.42  CJO=0.63n  VJ=0.5)
Rpar      b    d2   1Meg
Dgd       a    d2   DGD
Rpar2     d2   a    10Meg
Cgs     g2    s2    4.33n

.ENDS IPTG054N15NM5_L0

*****************

.SUBCKT IPTG063N15NM5_L0 drain gate source

Lg     gate   g1   3n
Ld     drain  d1   2n
Ls     source s1   2n
Rs     s1     s2   255u  TC=3m

Rg     g1     g2   0.9

M1     d2     g2    s2    s2    DMOS    L=1u   W=1u
.MODEL DMOS NMOS ( KP=203.8  VTO=5  THETA=0  VMAX=1.5e5  ETA=0.005  LEVEL=3)
Rd     d1    d2    4.01m  TC=9m

Dbd     s2    d2    Dbt
.MODEL     Dbt    D(BV=161  M=0.65  CJO=1.52n  VJ=2.5V)
Rsp     s2    s3     0.15
Dbd1    s3    d2     Dbt1
.MODEL     Dbt1    D(BV=1000   M=0.65  CJO=5.99n  VJ=2.5V)
Dbody   s2   21    DBODY
.MODEL DBODY  D(IS=6.5p  N=1.05  RS=0.03u  EG=1.12  TT=30n)
Rdiode  d1  21    0.74m  TC=1m

.MODEL   sw    NMOS(VTO=0  KP=10   LEVEL=1)
Maux      g2   c    a    a   sw
Maux2     b    d    g2    g2   sw
Eaux      c    a    d2    g2   1
Eaux2     d    g2   d2    g2   -1
Cox       b    d2   0.54n
.MODEL     DGD    D(M=0.42  CJO=0.54n  VJ=0.5)
Rpar      b    d2   1Meg
Dgd       a    d2   DGD
Rpar2     d2   a    10Meg
Cgs     g2    s2    3.7n

.ENDS IPTG063N15NM5_L0

*****************

.SUBCKT IRF150P220_L0 drain gate source

Lg     gate   g1   5n
Ld     drain  d1   4n
Ls     source s1   6n
Rs     s1     s2   736u  TC=3m

Rg     g1     g2   0.5

M1     d2     g2    s2    s2    DMOS    L=1u   W=1u
.MODEL DMOS NMOS ( KP=662.5  VTO=5  THETA=0  VMAX=1.5e5  ETA=0.005  LEVEL=3)
Rd     d1    d2    1.32m  TC=9m

Dbd     s2    d2    Dbt
.MODEL     Dbt    D(BV=161  M=0.65  CJO=4.93n  VJ=2.5V)
Rsp     s2    s3     1u
Dbd1    s3    d2     Dbt1
.MODEL     Dbt1    D(BV=1000   M=0.65  CJO=19.06n  VJ=2.5V)
Dbody   s2   21    DBODY
.MODEL DBODY  D(IS=21.2p  N=1.05  RS=0.01u  EG=1.12  TT=30n)
Rdiode  d1  21    0.23m  TC=1m

.MODEL   sw    NMOS(VTO=0  KP=10   LEVEL=1)
Maux      g2   c    a    a   sw
Maux2     b    d    g2    g2   sw
Eaux      c    a    d2    g2   1
Eaux2     d    g2   d2    g2   -1
Cox       b    d2   1.75n
.MODEL     DGD    D(M=0.42  CJO=1.75n  VJ=0.5)
Rpar      b    d2   1Meg
Dgd       a    d2   DGD
Rpar2     d2   a    10Meg
Cgs     g2    s2    12.03n

.ENDS IRF150P220_L0

*****************

.SUBCKT IRF150P221_L0 drain gate source

Lg     gate   g1   5n
Ld     drain  d1   4n
Ls     source s1   6n
Rs     s1     s2   539u  TC=3m

Rg     g1     g2   1.1

M1     d2     g2    s2    s2    DMOS    L=1u   W=1u
.MODEL DMOS NMOS ( KP=330.5  VTO=5  THETA=0  VMAX=1.5e5  ETA=0.005  LEVEL=3)
Rd     d1    d2    2.55m  TC=9m

Dbd     s2    d2    Dbt
.MODEL     Dbt    D(BV=161  M=0.65  CJO=2.46n  VJ=2.5V)
Rsp     s2    s3     1u
Dbd1    s3    d2     Dbt1
.MODEL     Dbt1    D(BV=1000   M=0.65  CJO=9.61n  VJ=2.5V)
Dbody   s2   21    DBODY
.MODEL DBODY  D(IS=10.6p  N=1.05  RS=0.02u  EG=1.12  TT=30n)
Rdiode  d1  21    0.45m  TC=1m

.MODEL   sw    NMOS(VTO=0  KP=10   LEVEL=1)
Maux      g2   c    a    a   sw
Maux2     b    d    g2    g2   sw
Eaux      c    a    d2    g2   1
Eaux2     d    g2   d2    g2   -1
Cox       b    d2   0.87n
.MODEL     DGD    D(M=0.42  CJO=0.87n  VJ=0.5)
Rpar      b    d2   1Meg
Dgd       a    d2   DGD
Rpar2     d2   a    10Meg
Cgs     g2    s2    6n

.ENDS IRF150P221_L0

*****************


